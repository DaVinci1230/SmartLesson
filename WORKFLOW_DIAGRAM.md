# SmartLesson - Visual Workflow & Architecture

## Application Flow Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     SmartLesson Application                     â”‚
â”‚                    ğŸ“˜ TOS & Assessment Generator                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                              â”‚   User Input â”‚
                              â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                                  â”‚
                    â–¼                                  â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  Lesson Planner Tab  â”‚        â”‚ Assessment Generator â”‚
        â”‚                      â”‚        â”‚      (6 sub-tabs)    â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚                                â”‚
                â”‚                                â”‚
                â–¼                                â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ - Lesson Details     â”‚        â”‚ 1. Course /  â”‚
        â”‚ - Learning Objectivesâ”‚        â”‚    Syllabus  â”‚
        â”‚ - Teaching Plan      â”‚        â”‚    â†“         â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚ ğŸ“„ PDF Upload
                                        â”‚    â†“
                                        â”‚ ğŸ” Extract:
                                        â”‚  â€¢ Course Code
                                        â”‚  â€¢ Title
                                        â”‚  â€¢ Semester
                                        â”‚  â€¢ Year
                                        â”‚  â€¢ Instructor
                                        â”‚  â€¢ Section IV
                                        â”‚    Outcomes
                                        â”‚ ğŸ“š Exam Term
                                        â”‚  (Midterm/Final)
                                        â”‚
                                        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                        â”‚ 2. Learning  â”‚
                                        â”‚    Outcomes  â”‚
                                        â”‚              â”‚
                                        â”‚ ğŸ“‹ Import    â”‚
                                        â”‚    from PDF  â”‚
                                        â”‚              â”‚
                                        â”‚ â±ï¸ Assign    â”‚
                                        â”‚   hours to   â”‚
                                        â”‚   each       â”‚
                                        â”‚
                                        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                        â”‚ 3. Assessmentâ”‚
                                        â”‚    Profile   â”‚
                                        â”‚              â”‚
                                        â”‚ ğŸ¯ Bloom's   â”‚
                                        â”‚    Distribution:
                                        â”‚  â€¢ Remember  â”‚
                                        â”‚  â€¢ Understandâ”‚
                                        â”‚  â€¢ Apply     â”‚
                                        â”‚  â€¢ Analyze   â”‚
                                        â”‚  â€¢ Evaluate  â”‚
                                        â”‚  â€¢ Create    â”‚
                                        â”‚
                                        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                        â”‚ 4. Generate  â”‚
                                        â”‚    TOS       â”‚
                                        â”‚              â”‚
                                        â”‚ âš™ï¸ Create    â”‚
                                        â”‚    matrix    â”‚
                                        â”‚
                                        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                        â”‚ 5. Generate  â”‚
                                        â”‚    TQS       â”‚
                                        â”‚              â”‚
                                        â”‚ ğŸ¤– AI Test   â”‚
                                        â”‚    Questions â”‚
                                        â”‚
                                        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                        â”‚ 6. Export    â”‚
                                        â”‚              â”‚
                                        â”‚ ğŸ“¥ Download  â”‚
                                        â”‚    Excel     â”‚
                                        â”‚    (with     â”‚
                                        â”‚    exam term)
                                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## PDF Processing Pipeline

```
Upload PDF File
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   PDF Reader (PyPDF2)            â”‚
â”‚   Extract all text from pages    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Pattern Matching (Regex)       â”‚
â”‚                                  â”‚
â”‚   Extract:                       â”‚
â”‚   â€¢ Course Code patterns         â”‚
â”‚   â€¢ Title patterns               â”‚
â”‚   â€¢ Semester patterns            â”‚
â”‚   â€¢ Academic Year patterns       â”‚
â”‚   â€¢ Instructor patterns          â”‚
â”‚   â€¢ Section IV (NEW!)            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Section IV Detection           â”‚
â”‚   (NEW FEATURE)                  â”‚
â”‚                                  â”‚
â”‚   Look for:                      â”‚
â”‚   - "Section IV" header          â”‚
â”‚   - "Learning Plan" header       â”‚
â”‚   - Learning Outcomes column     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Outcome Extraction             â”‚
â”‚   (NEW ENHANCEMENT)              â”‚
â”‚                                  â”‚
â”‚   Process:                       â”‚
â”‚   1. Find Learning Outcomes text â”‚
â”‚   2. Split by line breaks        â”‚
â”‚   3. Remove bullets/numbers      â”‚
â”‚   4. Filter short items          â”‚
â”‚   5. Clean up whitespace         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Return Structured Data         â”‚
â”‚                                  â”‚
â”‚   {                              â”‚
â”‚     "course_code": "CS101",      â”‚
â”‚     "course_title": "HCI",       â”‚
â”‚     "semester": "1st",           â”‚
â”‚     "academic_year": "2025-2026",â”‚
â”‚     "instructor": "Dr. Smith",   â”‚
â”‚     "learning_outcomes": [       â”‚
â”‚       "Explain HCI concepts",    â”‚
â”‚       "Analyze user behavior",   â”‚
â”‚       "Design interfaces"        â”‚
â”‚     ]                            â”‚
â”‚   }                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
   Display in UI
```

---

## Data Flow: Course Details

```
PDF Upload
     â”‚
     â–¼
Extract Data (Section IV)
     â”‚
     â–¼
Update Session State
â”‚
â”œâ”€â†’ course_details {
â”‚
â”‚     "course_code":    Auto â†  Manual Edit
â”‚     "course_title":   Auto â†  Manual Edit
â”‚     "semester":       Auto â†  Manual Edit
â”‚     "academic_year":  Auto â†  Manual Edit
â”‚     "instructor":     Auto â†  Manual Edit
â”‚     "total_hours":    Manual Entry
â”‚     "exam_term":      Manual Select (NEW!)
â”‚                           â”‚
â”‚                           â””â”€â†’ Midterm or Final
â”‚   }
â”‚
â””â”€â†’ extracted_learning_outcomes [...]
         â”‚
         â””â”€â†’ Import to Learning Outcomes Tab
             â”‚
             â”œâ”€â†’ assessment_outcomes {
             â”‚     outcome: string
             â”‚     hours: number (teacher edits)
             â”‚   }
             â”‚
             â””â”€â†’ TOS Generation
                 â”‚
                 â”œâ”€â†’ Learning Outcomes Ã— Bloom's Matrix
                 â”‚
                 â””â”€â†’ Export Excel
                     (filename includes exam_term)
```

---

## Component Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      app.py (Main UI)                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Tab 1: Course/Syllabus                          â”‚  â”‚
â”‚  â”‚  â”œâ”€ PDF Upload Input                             â”‚  â”‚
â”‚  â”‚  â”œâ”€ Course Details Fields                        â”‚  â”‚
â”‚  â”‚  â”œâ”€ Exam Term Selector (NEW)                     â”‚  â”‚
â”‚  â”‚  â””â”€ Extracted Details Display                    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Tab 2: Learning Outcomes                        â”‚  â”‚
â”‚  â”‚  â”œâ”€ Import from PDF Button (NEW)                 â”‚  â”‚
â”‚  â”‚  â”œâ”€ Import from Lesson Planner Button            â”‚  â”‚
â”‚  â”‚  â”œâ”€ Add Custom Outcome Input                     â”‚  â”‚
â”‚  â”‚  â”œâ”€ Outcome Display & Edit                       â”‚  â”‚
â”‚  â”‚  â”œâ”€ Hours Management                             â”‚  â”‚
â”‚  â”‚  â””â”€ Hours Summary (with Coverage %)              â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Tabs 3-6: Assessment & Export                   â”‚  â”‚
â”‚  â”‚  â”œâ”€ Bloom's Configuration                        â”‚  â”‚
â”‚  â”‚  â”œâ”€ TOS Generation                               â”‚  â”‚
â”‚  â”‚  â”œâ”€ Exam Term Display (NEW)                      â”‚  â”‚
â”‚  â”‚  â””â”€ Excel Export with Exam Term (NEW)            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚              â”‚              â”‚
            â–¼              â–¼              â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚pdf_service. â”‚ â”‚lesson_serviceâ”‚ â”‚tos_service.py â”‚
   â”‚py (NEW)     â”‚ â”‚.py           â”‚ â”‚                â”‚
   â”‚             â”‚ â”‚              â”‚ â”‚ â€¢ Generate TOS â”‚
   â”‚ â€¢ Extract   â”‚ â”‚ â€¢ Create     â”‚ â”‚ â€¢ Calculate    â”‚
   â”‚   Section IVâ”‚ â”‚   lesson     â”‚ â”‚   matrix       â”‚
   â”‚ â€¢ Parse     â”‚ â”‚              â”‚ â”‚                â”‚
   â”‚   outcomes  â”‚ â”‚              â”‚ â”‚                â”‚
   â”‚ â€¢ Return    â”‚ â”‚              â”‚ â”‚                â”‚
   â”‚   structure â”‚ â”‚              â”‚ â”‚                â”‚
   â”‚   data      â”‚ â”‚              â”‚ â”‚                â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚   Streamlit Session State            â”‚
   â”‚                                      â”‚
   â”‚   â€¢ course_details                  â”‚
   â”‚   â€¢ assessment_outcomes             â”‚
   â”‚   â€¢ extracted_learning_outcomes(NEW)â”‚
   â”‚   â€¢ bloom_weights                   â”‚
   â”‚   â€¢ generated_tos                    â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Exam Term Selection Flow

```
Course/Syllabus Tab
â”‚
â”œâ”€â†’ Manual Selection
â”‚   â”‚
â”‚   â”œâ”€â†’ "Midterm"
â”‚   â”‚   â””â”€â†’ st.session_state.course_details["exam_term"] = "Midterm"
â”‚   â”‚
â”‚   â””â”€â†’ "Final"
â”‚       â””â”€â†’ st.session_state.course_details["exam_term"] = "Final"
â”‚
â””â”€â†’ Used In:
    â”‚
    â”œâ”€â†’ Generate TOS Tab
    â”‚   â””â”€â†’ Display: "Creating TOS for: Midterm Exam"
    â”‚
    â”œâ”€â†’ Export Tab
    â”‚   â””â”€â†’ Display in course preview
    â”‚
    â””â”€â†’ Excel Export
        â””â”€â†’ filename: TOS_CS101_Midterm.xlsx
                  or TOS_CS101_Final.xlsx
```

---

## Data Persistence

```
Session Start
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Streamlit Session State        â”‚
â”‚  (In-Memory Storage)            â”‚
â”‚                                 â”‚
â”‚  Lost when:                     â”‚
â”‚  â€¢ App restarts                 â”‚
â”‚  â€¢ Browser tab closes           â”‚
â”‚  â€¢ Page refreshed               â”‚
â”‚                                 â”‚
â”‚  Preserved:                     â”‚
â”‚  â€¢ During active session        â”‚
â”‚  â€¢ Across tab switches          â”‚
â”‚  â€¢ Across reruns                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â–¼
 Export to Excel
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Excel File (Local Storage)     â”‚
â”‚                                 â”‚
â”‚  Persists:                      â”‚
â”‚  â€¢ Forever (unless deleted)     â”‚
â”‚  â€¢ Across app sessions          â”‚
â”‚  â€¢ Shareable                    â”‚
â”‚  â€¢ Ready for use in exams       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Section IV Pattern Matching

```
PDF Text Stream
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Regex: "Section IV" or "Learning Plan"      â”‚
â”‚ Pattern: r'(?:Section\s+IV|IV\.)\s*...'     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚ Match found
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Extract Section IV Content                  â”‚
â”‚ (~100 lines from header)                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Regex: "Learning Outcomes" column           â”‚
â”‚ Pattern: r'(?:Learning\s+Outcomes?)[:\s\n]'â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚ Column found
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Extract Outcome Text                        â”‚
â”‚ Split by line breaks and bullets            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Clean & Filter                              â”‚
â”‚ â€¢ Remove numbers/bullets                    â”‚
â”‚ â€¢ Remove short text (<10 chars)             â”‚
â”‚ â€¢ Remove week/module refs                   â”‚
â”‚ â€¢ Keep meaningful outcomes                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Return List of Learning Outcomes            â”‚
â”‚ [1-15 outcomes from Section IV only]        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Key Improvements Summary

```
BEFORE Update:
PDF â†’ Entire Document â†’ Generic Outcomes â†’ TOS

AFTER Update:
PDF â†’ Section IV â†’ Learning Outcomes Column â†’ TOS
                â†“
            Exam Term Selection
                â†“
        (Midterm or Final) â†’ Export with Term
```

---

## File Organization

```
SmartLesson/
â”œâ”€â”€ app.py                    â† Main UI (ENHANCED)
â”œâ”€â”€ requirements.txt          â† Dependencies
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ pdf_service.py        â† PDF processing (REWRITTEN)
â”‚   â”œâ”€â”€ tos_service.py        â† TOS generation
â”‚   â”œâ”€â”€ export_service.py     â† Excel export
â”‚   â”œâ”€â”€ ai_service.py         â† AI integration
â”‚   â”œâ”€â”€ lesson_service.py     â† Lesson planning
â”‚   â””â”€â”€ __init__.py
â”œâ”€â”€ models/
â”‚   â”œâ”€â”€ lesson.py
â”‚   â”œâ”€â”€ question.py
â”‚   â”œâ”€â”€ tos.py
â”‚   â””â”€â”€ __init__.py
â”œâ”€â”€ core/
â”‚   â”œâ”€â”€ config.py
â”‚   â”œâ”€â”€ database.py
â”‚   â””â”€â”€ __init__.py
â”‚
â””â”€â”€ Documentation/
    â”œâ”€â”€ SETUP_GUIDE.md
    â”œâ”€â”€ PDF_UPLOAD_GUIDE.md
    â”œâ”€â”€ SECTION_IV_UPDATE.md
    â”œâ”€â”€ QUICK_REFERENCE.md
    â”œâ”€â”€ UPDATE_SUMMARY.md
    â””â”€â”€ WORKFLOW_DIAGRAM.md (this file)
```

---

This diagram shows how all the pieces fit together! ğŸ“Šâœ¨
